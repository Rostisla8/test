"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[275],{275:(e,a,t)=>{t.r(a),t.d(a,{default:()=>B});var s=t(43),r=t(257),i=(t(577),t(823));const l="MovieSchedulePage_container__Onn5G",n="MovieSchedulePage_moviesList__ZglwV",o="MovieSchedulePage_status__PjM1S",d="MovieSchedulePage_error__qhENg",c="MovieSchedulePage_noMovies__Iata5",_="CalendarHeader_calendarHeader__vg1tF",h="CalendarHeader_dateWrapper__IPIYT",m="CalendarHeader_date__rtHlY",v="CalendarHeader_dayNumber__4L4ci",u="CalendarHeader_monthInfo__qV+XX",f="CalendarHeader_dayOfWeek__cf-w1",p="CalendarHeader_month__11cfs",x="CalendarHeader_todayTag__cNmJY";var j=t(579);const N=e=>["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"][e.getDay()],g=e=>["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"][e.getMonth()],w=e=>{let{date:a,isToday:t}=e;return(0,j.jsx)("div",{className:_,children:(0,j.jsxs)("div",{className:h,children:[(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)("span",{className:v,children:a.getDate()}),(0,j.jsxs)("div",{className:u,children:[(0,j.jsx)("span",{className:f,children:N(a)}),(0,j.jsxs)("span",{className:p,children:[g(a)," ",a.getFullYear()]})]})]}),t&&(0,j.jsx)("div",{className:x,children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f"})]})})};var C=t(822);const D="DateScroller_scrollerContainer__Ol3Sk",M="DateScroller_dateItem__erJDJ",y="DateScroller_dayLabel__T+cDG",S="DateScroller_dayNumber__aK9o4",b="DateScroller_selected__O+5gM",E=e=>{let{availableDates:a,selectedDate:t,onDateSelect:r}=e;const l=(0,s.useRef)(null),n=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(n.current&&l.current){const e=l.current,a=n.current,t=a.offsetLeft+a.offsetWidth/2-e.offsetWidth/2;e.scrollTo({left:t,behavior:"smooth"})}}),[t]),(0,j.jsx)("div",{className:D,ref:l,children:a.map(((e,a)=>{const s=e.toDateString()===t.toDateString();return(0,j.jsxs)("div",{ref:s?n:null,className:`${M} ${s?b:""}`,onClick:()=>r(e),children:[(0,j.jsx)("div",{className:y,children:(0,i.GP)(e,"E",{locale:C.ru}).toUpperCase()}),(0,j.jsx)("div",{className:S,children:(0,i.GP)(e,"d")})]},a)}))})};var P=t(204);const k="MovieCard_card__fwfKG",H="MovieCard_movieInfo__r3It6",$="MovieCard_header__wU19E",I="MovieCard_title__XetjX",G="MovieCard_director__ujd26",T="MovieCard_alwaysVisibleDetails__yDt1K",A="MovieCard_optionsButton__Z7wag",L="MovieCard_details__4fh9V",Y="MovieCard_detailItem__U-GUf",F="MovieCard_theaterGroup__nAbi7",O="MovieCard_theaterName__FA9LS",V="MovieCard_showtimes__-UVTV",X="MovieCard_showtimeChip__BvPw1",U="MovieCard_expandableContent__OR2eg",W="MovieCard_expanded__zvH9Q",q="MovieCard_movieImage__LXYiS",J="MovieCard_description__eyWds",K=e=>{var a,t,s;let{movieGroup:r,isExpanded:i,onToggleExpand:l}=e;if(!r||!r.movieData||!r.theaters)return console.warn("MovieCard \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435:",r),null;const{movieData:n,theaters:o}=r,d=n.image?`https://kinobrest.by${n.image}`:null;return(0,j.jsx)("div",{className:k,onClick:()=>l(n.title),children:(0,j.jsxs)("div",{className:H,children:[(0,j.jsxs)("div",{className:$,children:[(0,j.jsx)("h3",{className:I,children:n.title}),(0,j.jsx)("button",{className:A,"aria-label":"\u041e\u043f\u0446\u0438\u0438",onClick:e=>{e.stopPropagation(),alert("\u041e\u043f\u0446\u0438\u0438 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u043c\u0430 "+n.title)},children:(0,j.jsx)(P.H_v,{color:"#666"})})]}),(0,j.jsxs)("div",{className:T,children:[(null===(a=n.additional_info)||void 0===a?void 0:a.duration)&&(0,j.jsxs)("div",{className:Y,children:[(0,j.jsx)(P.w_X,{}),(0,j.jsx)("span",{children:n.additional_info.duration})]}),(null===(t=n.additional_info)||void 0===t?void 0:t.director)&&(0,j.jsxs)("p",{className:G,children:["\u0420\u0435\u0436\u0438\u0441\u0441\u0435\u0440: ",n.additional_info.director]})]}),(0,j.jsxs)("div",{className:`${U} ${i?W:""}`,children:[d&&(0,j.jsx)("img",{src:d,alt:`\u041f\u043e\u0441\u0442\u0435\u0440 ${n.title}`,className:q}),(null===(s=n.additional_info)||void 0===s?void 0:s.description)&&(0,j.jsx)("p",{className:J,children:n.additional_info.description})]}),(0,j.jsx)("div",{className:L,children:o.map((e=>(0,j.jsxs)("div",{className:F,children:[(0,j.jsxs)("div",{className:O,children:[(0,j.jsx)(P.vq8,{}),(0,j.jsx)("span",{children:e.name})]}),(0,j.jsx)("div",{className:V,children:e.showtimes.map((e=>(0,j.jsx)("span",{className:X,children:e},e)))})]},e.name)))})]})})},R=["\u042f\u043d\u0432\u0430\u0440\u044f","\u0424\u0435\u0432\u0440\u0430\u043b\u044f","\u041c\u0430\u0440\u0442\u0430","\u0410\u043f\u0440\u0435\u043b\u044f","\u041c\u0430\u044f","\u0418\u044e\u043d\u044f","\u0418\u044e\u043b\u044f","\u0410\u0432\u0433\u0443\u0441\u0442\u0430","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u041e\u043a\u0442\u044f\u0431\u0440\u044f","\u041d\u043e\u044f\u0431\u0440\u044f","\u0414\u0435\u043a\u0430\u0431\u0440\u044f"],B=()=>{const[e,a]=(0,s.useState)([]),[t,_]=(0,s.useState)(!0),[h,m]=(0,s.useState)(null),[v,u]=(0,s.useState)(new Date),[f,p]=(0,s.useState)(new Set),[x,N]=(0,s.useState)([]),[g,C]=(0,s.useState)(null);(0,s.useEffect)((()=>{(async()=>{_(!0),m(null);try{const e=await fetch("https://test.akshome.by/test2/$movies.json");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();a(t);const s=new Set,l=new Map;t.forEach((e=>{var a;null!==(a=e.additional_info)&&void 0!==a&&a.show_times&&Object.keys(e.additional_info.show_times).forEach((e=>{const a=(e=>{const a=e.split(" ");if(3!==a.length)return null;const t=parseInt(a[0],10),s=R.findIndex((e=>e.toLowerCase()===a[1].toLowerCase())),i=parseInt(a[2],10);if(isNaN(t)||-1===s||isNaN(i))return null;const l=new Date(i,s,t);return(0,r.f)(l)&&l.getFullYear()===i&&l.getMonth()===s&&l.getDate()===t?l:null})(e);if(a){const e=(0,i.GP)(a,"yyyy-MM-dd");s.add(e),l.has(e)||l.set(e,a)}}))}));const n=Array.from(l.values()).sort(((e,a)=>e-a));p(s),N(n);const o=(0,i.GP)(new Date,"yyyy-MM-dd");!s.has(o)&&n.length>0?u(n[0]):u(new Date)}catch(e){console.error("Failed to fetch movies:",e),m("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u043c\u043e\u0432")}finally{_(!1)}})()}),[]);const D=e=>{C((a=>a===e?null:e))},M=(()=>{if(!e||0===e.length)return[];const a=(t=v,`${String(t.getDate()).padStart(2,"0")} ${R[t.getMonth()]} ${t.getFullYear()}`);var t;const s=new Map;return e.forEach((e=>{var t;if(null===(t=e.additional_info)||void 0===t||!t.show_times)return;const r=e.additional_info.show_times[a];if(!r||!Array.isArray(r))return;s.has(e.title)||s.set(e.title,{movieData:{...e},theaters:[]});const i=s.get(e.title);r.forEach((e=>{const a=e.theater||"\u041a\u0438\u043d\u043e\u0442\u0435\u0430\u0442\u0440";let t=i.theaters.find((e=>e.name===a));if(t||(t={name:a,showtimes:[]},i.theaters.push(t)),e.showtimes&&Array.isArray(e.showtimes)){const a=new Set(t.showtimes);e.showtimes.forEach((e=>{const t=e.match(/(\d{1,2}:\d{2})/);t&&a.add(t[0])})),t.showtimes=Array.from(a).sort()}})),i.theaters.sort(((e,a)=>e.name.localeCompare(a.name)))})),Array.from(s.values()).sort(((e,a)=>e.movieData.title.localeCompare(a.movieData.title)))})(),y=v.toDateString()===(new Date).toDateString();return(0,j.jsxs)("div",{className:l,children:[(0,j.jsx)(w,{date:v,isToday:y}),(0,j.jsx)(E,{selectedDate:v,onDateSelect:e=>{u(e),C(null)},availableDates:x}),t&&(0,j.jsx)("p",{className:o,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f..."}),h&&(0,j.jsx)("p",{className:d,children:h}),!t&&!h&&0===M.length&&(0,j.jsx)("p",{className:c,children:"\u041d\u0435\u0442 \u0444\u0438\u043b\u044c\u043c\u043e\u0432 \u043d\u0430 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u0443\u044e \u0434\u0430\u0442\u0443"}),(0,j.jsx)("div",{className:n,children:M.map(((e,a)=>e&&e.movieData?(0,j.jsx)(K,{movieGroup:e,isExpanded:e.movieData.title===g,onToggleExpand:D},`${e.movieData.title||"movie"}-${a}`):null))})]})}}}]);
//# sourceMappingURL=275.1cd56d72.chunk.js.map